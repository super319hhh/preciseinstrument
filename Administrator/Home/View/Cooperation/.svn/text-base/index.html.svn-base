<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/bootstrap.min.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/plugins/summernote/summernote.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/font-awesome.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/font-awesome.min.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/style.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/plugins/dataTables/dataTables.bootstrap.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/plugins/sweetalert/sweetalert2.min.css" />
	<link rel="stylesheet" href="__ADMIN__/vendor/hadmin/css/loaders.css" />
	
	
	
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/jquery.min.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/bootstrap.min.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/plugins/summernote/summernote.min.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/plugins/summernote/summernote-zh-CN.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/plugins/dataTables/jquery.dataTables.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/plugins/dataTables/dataTables.bootstrap.js" ></script>
	<script type="text/javascript" src="__ADMIN__/vendor/hadmin/js/plugins/sweetalert/sweetalert2.min.js" ></script>
	
	
	
	
	<style type="text/css">
		.loaded {transition: opacity .25s linear;opacity: 1; }
		.loaders {
			width: 100%;
			box-sizing: border-box;
			display: flex;
			flex: 0 1 auto;
			flex-direction: row;
			flex-wrap: wrap;
		}
		.loaders .loader {
			box-sizing: border-box;
			display: flex;
			flex: 0 1 auto;
			flex-direction: column;
			flex-grow: 1;
			flex-shrink: 0;
			flex-basis: 25%;
			max-width: 25%;
			height: 200px;
			align-items: center;
			justify-content: center;
		}	
		.text-ellipsis{
			text-overflow:ellipsis;
			white-space:nowrap;
			overflow:hidden;
		}
		.navbar-header {
			    width: 8%;
			}
		.container-fluid{
			border: 1px solid #e7e7e7;
			background: #e7e7e7;
		}	
		.nav > li.active{
			border-left: none;
		}
		body{
			font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    		font-size: 14px;
		}
		div.dataTables_length label {
		    display: inline-block;
		    max-width: 100%;
		    margin-bottom: 5px;
		    font-weight: 700;
		}
		.dataTables_filter>label,
		.dataTables_paginate>ul {
			float: right;
		}
		#btn-div button{
			margin: 10px 5px 0px 5px;
			font-size: 16px;
		}
		.dismissed-btn {
			width: 100%;
			margin-top: 1%;
			height: 50px;
		}
		#selectTypeToShow ul li a {
			transition: all 0.5s;
		}
		#selectTypeToShow ul li a:hover {
			background: #C9C9C9;
		}
		.cardRow {
			width: 90%;
			background: #ffffff;
			margin: 0 auto;
			transition: all 0.3s;
		}
		.cardRow>.row {
			height: 50px;
			border-bottom: 1px solid #EEEEEE;
			line-height: 50px;
		}
		.cardRow .icon {
			font-size: 200%;
			text-align: center;
			color: #486b6b;
			float: left;
		}
		.cardRow .content .head {
			float: left;
			font-size: 150%;
			font-weight: bold;
			font-family: "微软雅黑";
			padding-left: 0;
			width: 100px;
		}
		.cardRow .icon,
		.cardRow .content {
			height: 100%;
		}
		.cardRow>.pic-area {
			margin-top: 10px;
			padding: 2px;
			border: 2px solid #EEEEEE;
			overflow: hidden;
		}
		.cardRow>.pic-area .pic-apic{
			float: left;
			border: 2px dashed #EEEEEE;
		    padding: 3px;
		    margin: 10px;
		}
		.cardRow>.pic-area .pic-apic img{
			width: 100%;
		}
		.kmc-danger {
			background: #FFFFFF;
			color: #d9534f;
		}
		
		.kmc-info {
			background: #FFFFFF;
			color: #5bc0de;
		}
		.pic-zoom{
			cursor: pointer;
		}
		.pic-zoomed{
			width: 90%;
			height: 90%;
    		overflow: hidden;
			position: fixed;
			left: 50%;
			top: 50%;
			z-index: 1200;
		    box-shadow: 0 0 40px 15px #000000;
		    background: rgba(0,0,0,0.9);
		}
		.pic-zoomed img{
		    position: absolute;
			z-index: 1201;
			cursor: move;
		}
		.pic-zoomed-close{
		    position: absolute;
		    right: 10px;
		    top: 10px;
		    z-index: 1202;
		    cursor: pointer;
	        width: 40px;
		    height: 40px;
		    color: #eeeeee;
		    text-align: center;
		    line-height: 40px;
		    font-size: 40px;
		}
		@media (min-width: 768px) {
			.kmc-width {
				width: 100%;
			}
		}
		@media (min-width: 992px) {
			.kmc-width {
				width: 100%;
			}
			.cardRow>.pic-area .pic-apic{
				width: 250px;
			    height: 250px;
			}
		}
		@media (min-width: 1200px) {
			.kmc-width {
				width: 50%;
			}
			.cardRow>.pic-area .pic-apic{
				width: 250px;
			    height: 250px;
			}
		}
		.text-overflow {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
		.modal-body{
			height: 500px;
		}
		div .modal-content{
			width: 100%;
		}
		.form-group{
			font-size: 14px;
		}
		/*重置sb-admin箭头样式*/
        .table.dataTable thead .sorting_asc:after,
        .table.dataTable thead .sorting_desc:after,
        .table.dataTable thead .sorting:after{
            content: "";
        }
        .navbar-header a{
        	padding: 10px;
        	padding-top: 15px;
        }
        .modal-dialog{
        	width: 90%;
        }
        .form-group{
        	margin: 5px 137px 5px -14px;
        }
        .note-editor{
        	margin-top: 10px;
        }
        .form-group{
        	margin: 0px;
        }
	</style>

</head>
<body>
    <div class="wrapper wrapper-content">
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">合作管理</h1>
			</div>
		</div>
	<nav class="navbar navbar-default" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#"><b>选择查看</b></a>
			</div>
			<div class="collapse navbar-collapse" id="selectTypeToShow">
				<ul class="nav navbar-nav">
					<li class="active" id="unOp" value=" ">
						<a href="javascript:void(0)">全部</a>
					</li>
					<volist name="type" id="vo">
						<li id="unOp" value="{$vo.type_name}">
						<a href="javascript:void(0)">{$vo.type_name}</a>
						</li>
					</volist>
				</ul>
			</div>
		</div>
		<div id="btn-div">
			<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#applicationDetial">新增</button>
		</div>
		
	</nav>
	<div class="row">
		<div class="col-lg-12">
			<div class="panel panel-default">
				<!--<div class="panel-heading">
				</div>-->
				<div class="panel-body">
					<table width="100%" class="table table-striped table-bordered table-hover" id="maintenanceRegApplication">
						<thead class="hide-the-fuck-th">
							<tr>
								<th width="10%">合作类型</th>
								<th width="10%">合作标题</th>
								<th width="20%">合作内容</th>
								<th width="20%">时间</th>
								<th width="10%">查看详情</th>
								<th width="10%">是否显示</th>
								<th width="20%">操作</th>
							</tr>
						</thead>
						<tbody></tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<!--新增模态框-->
	<div class="modal fade" id="applicationDetial" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
		<div class="modal-dialog kmc-width">
			<div class="modal-content" style="background: #FFFFFF;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h2 class="modal-title" id="myModalLabel">新增合作</h2>
				</div>
				<div class="modal-body">
					<div class="cardRow">
						<form class="form-inline" id="mc-form">
						<div class="row">
						  <div class="form-group col-lg-4">
						    <label for="cooperationType">合作类型</label>
						    <select class="form-control" id="cooperationType" name="cooperationType">
				           		<option value="">--请选择--</option>
				           		<volist name="type" id="vo">
				           			<option value="{$vo.type_id}">{$vo.type_name}</option>
				           		</volist>
				           	</select>
						  </div>
						   <div class="form-group col-lg-4">
						    <label for="languageType">语言类型</label>
						    <select class="form-control" id="languageType" name="languageType">
				           		<option value="">--请选择--</option>
				           		<option value="EN">EN</option>
				           		<option value="ZH">ZH</option>
				           	</select>
						  </div>
						  <div class="form-group col-lg-4">
						    <label for="cooperationTitle">合作标题</label>
						    <input type="email" class="form-control" id="cooperationTitle" name="cooperationTitle" placeholder="请输入合作标题">
						  </div>
						</div>
						  <div class="row">
							<div class="body text-overflow" id="editor">
								
							</div>
						  </div>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-info" id="kmcPass">确认</button>
					<button type="button" class="btn btn-default" data-dismiss="modal" id="cancelBtn">取消</button>
				</div>
			</div>
		</div>
	</div>
	<!--查看详情-->
	<div class="modal fade" id="applicationDetial2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
		<div class="modal-dialog kmc-width">
			<div class="modal-content" style="background: #FFFFFF;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h2 class="modal-title" id="myModalLabel">合作详情</h2>
				</div>
				<div class="modal-body">
					<div class="cardRow">
						<div class="row">
						<form class="form-inline" id="mc-form">
						  <div class="form-group col-lg-4">
						    <label for="cooperationType">合作类型</label>
						    <select class="form-control" id="cooperationType2" name="cooperationType" disabled>
				           		<option value=""></option>
				           	</select>
						  </div>
						   <div class="form-group col-lg-4">
						    <label for="languageType">语言类型</label>
						    <select class="form-control" id="languageType2" name="languageType"disabled>
				           		<option value="{$vo}"></option>
				           	</select>
						  </div>
						  <div class="form-group col-lg-4">
						    <label for="cooperationTitle">合作标题</label>
						    <input type="email" class="form-control" id="cooperationTitle2" name="cooperationTitle" placeholder="请输入合作标题" disabled>
						  </div>
						</div>
						  <div class="row">
							<div class="body text-overflow" id="editor2"></div>
						  </div>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-info" id="kmcPass2" data-dismiss="modal" aria-hidden="true">确认</button>
				</div>
			</div>
		</div>
	</div>
	<!--修改-->
	<div class="modal fade" id="applicationDetial1"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
		<div class="modal-dialog kmc-width">
			<div class="modal-content" style="background: #FFFFFF;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h2 class="modal-title" id="myModalLabel">编辑合作</h2>
				</div>
				<div class="modal-body">
					<div class="cardRow">
						<form class="form-inline" id="mc-form1">
							<div class="row">
						  <div class="form-group col-lg-4">
						    <label for="cooperationType">合作类型</label>
						    <select class="form-control" id="cooperationType1" name="message_type">
						    	<volist name="type" id="vo">
				           			<option value="{$vo.type_id}">{$vo.type_name}</option>
				           		</volist>
				           		
				           	</select>
						  </div>
						   <div class="form-group col-lg-4">
						    <label for="languageType">语言类型</label>
						    <select class="form-control" id="languageType1" name="language">
				           		<option value="EN">EN</option>
				           		<option value="ZH">ZH</option>
				           	</select>
						  </div>
						  <div class="form-group col-lg-4">
						    <label for="cooperationTitle">合作标题</label>
						    <input type="email" class="form-control" id="cooperationTitle1" name="message_title" placeholder="请输入合作标题">
						  </div>
						</div>
						  <div class="row">
							<div class="body text-overflow" id="editor1"></div>
						  </div>
						  <input type="hidden" name="message_id" id="message_id" value=""/>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-info" id="kmcPass1">确认</button>
					<button type="button" class="btn btn-default" data-dismiss="modal" id="cancelBtn">取消</button>
				</div>
			</div>
		</div>
	</div>
	
	
	
	</div>		
	
	<script type="text/javascript">
	/*写的不完善啊，要是有童鞋看到用了一定要慎重*/
		function KMCL(){
			this.loadSquare = '<style type="text/css">'+
										'.loader{position:absolute;top:50%;left:50%;margin-top:-100px;z-index:2001}'+
										'.loader .square-spin >div{'+
											'border: 5px solid #007cff;'+
										'}'+
							'</style>'+
							'<div id="KMC_MODEL_LOADING">'+
								'<div class="loader" >'+
									' <div class="loader-inner square-spin">'+
										
										'<div></div>'+
									'</div>'+
									'<p style="font-size: x-large;margin-left: -10px;margin-top: 5px;color:#ffffff;cursor:default">加载中...</p>'+
								'</div>'+
								'<div style="position: absolute;top: 0;left: 0; width: 100%;height: 200%;background: rgba(0,0,0,0.7); z-index:2000;"></div>'+
							'</div>';
			this.add = function(){
				if ( $('#KMC_MODEL_LOADING').length > 0 ) {
					//防止重复
				} else {
					$(document.body).append(this.loadSquare);
				}
			}
			this.remove = function(){
				if ( $('#KMC_MODEL_LOADING').length > 0 ) {
					$('#KMC_MODEL_LOADING').remove();
				} else {
					
				}
			}
		}
		var loading = new KMCL();
	</script>
	<script type="text/javascript">
		//DataTables 
		var maintenanceRegApplication;
		//显示类型
		var showType = -1;
		$(document).ready(function() {
			var tableHeight = document.body.clientHeight * 0.83 + 'px';
			$('#editor').summernote({
				height:"300px",
			});
			maintenanceRegApplication = $('#maintenanceRegApplication').DataTable({
				//加载完成后的回调
				"fnDrawCallback": function(obj) {
					$(".tableText").each(function() {
						$(this).width($(this).parent().width())
					})
				},
				"aaSorting": [
								[3, "desc"]
							 ],
				"responsive": true,
				"bProcessing": true,
				"sPaginationType": "full_numbers",
				"bDestory": true,
				"bRetrieve": true,
				"dom": '<"top"l<"toolbar">f>rt<"bottom"ip><"clear">',
				/*每页数量*/
				"aLengthMenu": [
					[20, 35, 50, -1],
					["20条", "35条", "50条", "全部"]
				], //二组数组，第一组数量，第二组说明文字;
				/*垂直滚动条*/
				"scrollY": tableHeight,
				    			"bSortCellsTop": "true",
				//  			"scrollCollapse": "false",
				/*自定义语言*/
				"oLanguage": {
					"sProcessing": "正在加载数据...",
					"sLengthMenu": "每页显示<i style='color:red;'>_MENU_</i>条记录",
					"sZeroRecords": "抱歉， 没有找到",
					"sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据&nbsp&nbsp&nbsp",
					"sInfoEmpty": "没有数据",
					"sInfoFiltered": "(从 _MAX_ 条数据中检索)",
					"sZeroRecords": "没有检索到数据",
					"sSearch": "搜索",
					"oPaginate": {
						"sFirst": "首页",
						"sPrevious": "前一页",
						"sNext": "后一页",
						"sLast": "尾页"
					},
				},
				/*请求方法*/
				"sAjaxSource": "__URL__/getMaintenanceRegApplication",
				/*向后台传参*/
				"fnServerParams": function(aoData) {
					aoData.push({
						"name": "showType",
						"value": "showType"
					});
				},
				//超出部分省略号
				"fnRowCallback": function (nRow, aaData, iDisplayIndex) {
			            if (aaData.message_content.length > 14) {
			                $('td:eq(2)', nRow).html( aaData.message_content.substr(0, 14)+'....');
			            }
			       },
				/*列，mData的个数要与html中的td一致*/
				"aoColumns": [{
					"data": "type_name",
					"render": function(data, type, full, meta) {
						return data = '<div class="tableText">' + data + '</div>'
					}
				}, {
					"data": "message_title",
					"render": function(data, type, full, meta) {
						return data = '<div class="tableText">' + data + '</div>'
					}
				}, {
					"data": "message_content",
					"render": function(data, type, full, meta) {
						return data = '<div class="tableText">' + data + '</div>'
					}
				}, {
					"data": "post_date",
					"render": function(data, type, full, meta) {
						return data = '<div class="tableText">' + data + '</div>'
					}
				}, {
					"data": "message_id",
					"render": function(data, type, full, meta) {
						return data = '<button type="button"  class="btn btn-success btn-sm " style="transition:all 0.5s;width:100%";" id="btnShow" attr-id="'+data+'"><i class="fa fa-navicon"></i> 查看</button>'
					}
				}, {
					"data": "is_show",
					"render": function(data, type, full, meta) {
						colorClass = full.is_show == 'Y' ? 'btn-info' : 'btn-danger';
						contentText = full.is_show == 'Y' ? '已显示' : '已隐藏';
						return data = '<button type="button" id="btnIsShow" class="btn ' + colorClass + ' btn-sm " style="transition:all 0.5s;width:100%;margin-right:4%;" > ' + contentText + '</button>';
					},
				}, {
					"data": "message_id",
					"render": function(data, type, full, meta) {
						return data = '<button type="button" class="btn btn-success btn-sm " attr-id="'+data+'" id="btnSave" style="transition:all 0.5s;width:48%;margin-right:4%;"><i class="fa fa-check-circle"></i> ' + "修改" + '</button>'+
								'<button type="button" class="btn btn-danger btn-sm" attr-id="'+data+'" style="transition:all 0.5s;width:48%;" id="btnDelete"><i class="fa fa-times-circle"></i>' + "删除" + '</button>';
					}
				}],

			});
		});

		/*↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑$(document).ready(function()--------END--------$(document).ready(function()--------END--------$(document).ready(function()--------END--------*/

		//模态框确认按钮 新增
		$("#kmcPass").bind("click",function(){
			$("#applicationDetial").modal('hide');
			var data = $("#mc-form").serializeArray();
			var postData = {};
			$(data).each(function(){
				postData[this.name]=this.value;
			})
			var textData = $(".note-editable").html();
			postData['message_content'] = textData;
					loading.add();
					$.ajax({
						cache: true,
						type: "POST",
						url: "__MODULE__/Cooperation/add",
						data: postData,
						dataType: "json",
						async: true,
						error: function(request) {
							sweetAlert(
								'糟糕...',
								'我们好像与服务器失去了连接，请重试!',
								'error'
							);
							//去除加载动画
							loading.remove();
						},
						success: function(data) {
							
							//去除加载动画
							loading.remove();
							//提示信息
//							maintenanceRegApplication.ajax.reload()
							location.href = '__ACTION__'
						}
					});
		})
		
		
		//修改模态框确认按钮
		$("#kmcPass1").bind("click",function(){
			$("#applicationDetial1").modal('hide');
			var data = $("#mc-form1").serializeArray();
			var postData = {};
			$(data).each(function(){
				postData[this.name]=this.value;
			})
			var abb = $("#message_id").attr("value");
			postData['message_id'] = abb;
			var textData = $("#editor1").code();
			postData['message_content'] = textData;
					loading.add();
					$.ajax({
						cache: true,
						type: "POST",
						url: "__MODULE__/Cooperation/edit",
						data: postData,
						dataType: "json",
						async: true,
						error: function(request) {
							sweetAlert(
								'糟糕...',
								'我们好像与服务器失去了连接，请重试!',
								'error'
							);
							//去除加载动画
							loading.remove();
						},
						success: function(data) {
							//去除加载动画
							loading.remove();
							//提示信息
							maintenanceRegApplication.ajax.reload()
						}
					});
		})
		
		//查看详情
//		$("#kmcPass2").bind("click",function(){
//			$("#applicationDetial2").hide();
//			location.href = '__ACTION__'
//			
//		})
		//获取表格选中的值
		function getDataTablesSelectedData(element) {
			var arr = $('#' + element).DataTable().rows('._hideSelected').data()[0];
			return arr;
		}
		//删除
		$(".table").on("click","#btnDelete",function(){
			var rowData = getDataTablesSelectedData('maintenanceRegApplication');
			if(rowData.is_show=='Y'){
				sweetAlert(
					'糟糕...',
					'状态为显示的信息无法删除，请重试!',
					'error'
							);
			}else{
				var abb = $(this).attr("attr-id");
				var postData = {};
				postData['message_id'] = abb;
				swal({
				title: '删除该条记录？',
				text: "操作后数据无法恢复",
				type: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: '确认删除',
				cancelButtonText: '取消操作',
				confirmButtonClass: 'btn btn-success dismissed-btn',
				cancelButtonClass: 'btn btn-danger dismissed-btn',
				buttonsStyling: false
				}).then(function(isConfirm){
					if(isConfirm === true) {
						loading.add();
					$.ajax({
					type:"post",
					url:"__MODULE__/Cooperation/upData",
					async:true,
					data:postData,
					dataType:'json',
					error: function(request) {
								sweetAlert(
									'糟糕...',
									'我们好像与服务器失去了连接，请重试!',
									'error'
								);
								//去除加载动画
								loading.remove();
							},
					success: function(data) {
						//去除加载动画
						loading.remove();
						//提示信息
						maintenanceRegApplication.ajax.reload()
	//					location.href = "__ACTION__"
								}
							});
						}
						})
				}
		})
			
		
		//查看详情
		$(".table").on("click","#btnShow",function(){
			$("#applicationDetial2").modal();
			loading.add();
			var abc = $(this).attr("attr-id");
			var postData = {};
			postData['message_id'] = abc;
			$.ajax({
				type:"post",
				url:"__MODULE__/Cooperation/showDetile",
				async:true,
				data:postData,
				dataType:'json',
				success: function(data){
					loading.remove();
					$("#cooperationType2 option").val(data['type_name']);
					$("#cooperationType2 option").text(data['type_name']);
					$("#languageType2 option").val(data['language']);
					$("#languageType2 option").text(data['language']);
					$("#cooperationTitle2").val(data['message_title']);
					$('#editor2').html(data['message_content']);
					$('#editor2').summernote({
						height:"300px",
					});
				}
//				loading.remove();
			});
			
		})
		//修改
		$(".table").on("click","#btnSave",function(){
			var rowData = getDataTablesSelectedData('maintenanceRegApplication');
			$("#message_id").attr('value',$(this).attr("attr-id"));
			for(var i=0;i<$('#cooperationType1 option').length;i++){
				if($('#cooperationType1 option').eq(i).val() == rowData.type_id)
				$('#cooperationType1 option').eq(i).prop('selected',true);
			}
			for(var i=0;i<$('#languageType1 option').length;i++){
				if($('#languageType1 option').eq(i).val() == rowData.language){
					$('#languageType1 option').eq(i).prop('selected',true);
				}
			}
			$("#cooperationTitle1").val(rowData['message_title']);
			$('#editor1').html(rowData['message_content']);
			$('#editor1').summernote({
				height:"300px",
			});
			$("#applicationDetial1").modal('show');
			
		})
		//数据是否展示在前台
		$(".table").on('click','#btnIsShow',function(){
			loading.add();
			var rowData = getDataTablesSelectedData('maintenanceRegApplication');
			var postData = {};
			if(rowData.is_show == 'Y'){
				postData['is_show'] = 'N';
				postData['message_id'] =rowData.message_id;
				postData['message_type'] = rowData.message_type;
			}
			if(rowData.is_show == 'N'){
				postData['is_show'] = 'Y';
				postData['message_id'] =rowData.message_id;
				postData['message_type'] = rowData.message_type;
			}
			$.ajax({
				type:"post",
				url:"__MODULE__/Cooperation/editIsShow",
				async:true,
				data:postData,
				dataType:'json',
				success:function(){
					loading.remove();
					maintenanceRegApplication.ajax.reload()
				},
				error:function(){
					loading.remove();
					maintenanceRegApplication.ajax.reload()
				}
			});
			
		})
		//模态框数据清空
		$('#applicationDetial').on('hidden.bs.modal', function (e) {
		  	$("#cooperationType option").attr('selected',false);	
		  	$("#languageType option").attr('selected',false);	
		  	$("#cooperationTitle").val('');	
		  	$(".modal-body #editor").text('');
		})
		$('#applicationDetial1').on('hidden.bs.modal', function (e) {
		  	$("#cooperationType1 option").attr('selected',false);	
		  	$("#languageType1 option").attr('selected',false);	
		  	$("#cooperationTitle1").val('');	
		  	$("#editor1").destroy();
		  	$("#editor1").text('');
//		  	$("#editor1").summernote('code');	
//		  	location.href = "__ACTION__"
		  	
		})
		$('#applicationDetial2').on('hidden.bs.modal', function (e) {
		  	$("#cooperationType2 option").attr('selected',false);	
		  	$("#languageType2 option").attr('selected',false);	
		  	$("#cooperationTitle2").val('');
		  	$("#editor2").destroy();
		  	$("#editor2").text('');
//		  	$("#editor2").summernote();	
//		  	location.href = "__ACTION__"
		})
		
		
		
		
		//点击表格事件
		$('#maintenanceRegApplication tbody').on('click', 'tr', function() {
			$('#maintenanceRegApplication').DataTable().$('tr._hideSelected').removeClass('_hideSelected');
			$(this).addClass('_hideSelected');
		});
		//去掉导航栏中a被点击后的虚线框框
		$("#selectTypeToShow ul li a").on('focus').css('outline', 'none')
			//点击导航栏选中的项变背景色，并且刷新表格
		$("#selectTypeToShow li").on('click', function() {
			//判断下是否已经选中，选中了再点击不发送请求
			var _selected = $(this).hasClass('active');
			//去掉所有选中
			$(this).parent().children().removeClass('active');
			//再将自己选中
			$(this).addClass('active')
			showType = $(this).attr('value');
			table = $('#maintenanceRegApplication').DataTable();
			var oSettings = "";
			oSettings = table.column(0).search(showType);
			table.draw(oSettings);
			_selected || maintenanceRegApplication.ajax.reload();
		});
	</script>
	
</body>
</html>